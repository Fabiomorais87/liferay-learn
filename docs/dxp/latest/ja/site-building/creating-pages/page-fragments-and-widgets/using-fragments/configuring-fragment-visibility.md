# フラグメントの閲覧の構成

> 対応可能：Liferay DXP/Portal 7.4以降

[フラグメント](../using-fragments.md)を使用して、さまざまなレイアウトと情報で[コンテントページ](../../using-content-pages.md)を組み立てることができます。 Liferay DXP 7.4 からは、ユーザーの画面サイズに応じたフラグメントの表示設定を行うことができます。 例えば、パソコンで閲覧するページではフラグメントを非表示にし、スマートフォンで閲覧するページではフラグメントを表示することができます。

各画面サイズでのフラグメントの見え方は、 [コンテントページエディタ](../../using-content-pages/content-page-editor-ui-reference.md)のページ上部にあるビューポートコントロールで設定することができます。

![ビューポートコントロールを使って、コンテントページでのフラグメントの閲覧性を設定します。](./configuring-fragment-visibility/images/01.png)

## フラグメントの閲覧とスタイルの継承の理解

フラグメントの見え方と、左側のビューポートに適用したスタイルは、右側のビューポートの1つに異なるスタイルを指定しない限り、右側のすべてのビューポートに適用されます。 例えば、デスクトップビューポートでフラグメントを隠すと、他のすべてのビューポートでもフラグメントが隠されます。 次の表は、この構成をまとめたものです。

| ビューポート    | 閲覧可能? | フラグメントの閲覧設定 |
|:--------- |:----- |:----------- |
| デスクトップ（A） | いいえ   | 非表示         |
| タブレット（B）  | いいえ   | デフォルト / 継承  |
| スマホ（横）(C) | いいえ   | デフォルト / 継承  |
| スマホ（縦）(D) | いいえ   | デフォルト / 継承  |

![右側のビューポートは、左側のビューポートの設定を引き継ぎます。](./configuring-fragment-visibility/images/02.png)

この設定により、例えばスマホ（横）でフラグメントを表示させると、そのビューポートとスマホ（縦）のビューポートでフラグメントが表示されたままとなります。 次の表は、新しい構成をまとめたものです。

| ビューポート    | 閲覧可能? | フラグメントの閲覧設定 |
|:--------- |:----- |:----------- |
| デスクトップ（A） | いいえ   | 非表示         |
| タブレット（B）  | いいえ   | デフォルト / 継承  |
| スマホ（横）(C) | はい    | 閲覧可能        |
| スマホ（縦）(D) | はい    | デフォルト / 継承  |

この例では、パソコンではフラグメントは非表示で、スマートフォンでは見えるようにしています。

## コンテントページエディタのビューポートの動作

次の表は、各ビューポートの動作をまとめたものです。

| ビューポート | 説明                                                                                                             |
|:------ |:-------------------------------------------------------------------------------------------------------------- |
| デスクトップ | デフォルトのビューポート。 ここで定義したフラグメントのスタイルと閲覧性は、他のビューポートで別のスタイルや閲覧性を指定しない限り、他のすべてのビューポートに適用されます。                         |
| タブレット  | タブレットサイズの画面に対応したビューポートです。 ここで定義したフラグメントのスタイルと閲覧性は、スマホ（横）またはスマホ（縦）のビューポートでスタイルまたは閲覧性を指定しない限り、スマホのビューポートに適用されます。 |
| スマホ（横） | このビューポートで定義したフラグメントのスタイルと閲覧性は、スマホ（縦）ビューポートで別のスタイルまたは閲覧性を指定しない限り、スマホ（縦）ビューポートにも適用されます。                          |
| スマホ（縦） | このビューポートは、ここで別のスタイルや閲覧性を指定しない限り、他のビューポートで行ったスタイルや閲覧性の変更を引き継ぎます。                                                |

## フラグメントの閲覧の変更

コンテンツページのフラグメントの閲覧性は、次の3つの方法で変更できます。

1. コンテントページエディタのサイドバーから、 **ブラウザ**(![Browser](../../../../images/icon-browser.png)) &rarr; ［**Page Elements**］ エリアに移動します。ページ フラグメントの横にある **Hide**(![Hide](../../../../images/icon-hide.png)) または **Unhide**(![Unhide](../../../../images/icon-preview.png)) のコントロールをクリックします。

   ![コンテントページエディタのサイドバーにある［Page Elements］エリアから、フラグメントの閲覧性を変更します。](./configuring-fragment-visibility/images/03.gif)

1. コンテントページエディタのサイドバーから、 **ブラウザ**(![Browser](../../../../images/icon-browser.png)) &rarr; ［**Styles**］ エリアの ［**Hide Fragment**］ ボックスをオンまたはオフにします。

   ![コンテントページエディタのサイドバーにある［ブラウザ］ &rarr; ［Styles］エリアから、フラグメントの閲覧性を変更します。](./configuring-fragment-visibility/images/04.gif)

1. フラグメントのアクションメニュー(![Actions](../../../../images/icon-widget-options.png))から、 ［**Hide Fragment**］(![Hide Fragment](../../../../images/icon-hide.png))オプションを選択します。

   ![フラグメントのアクションメニューからフラグメントの閲覧性を変更します。](./configuring-fragment-visibility/images/05.gif)

```{tip}
非表示にしたフラグメントを元に戻すには、ブラウザの［Page Elements］エリアから、ページフラグメントの横にある*Unhide* (![Unhide](../../../../images/icon-preview.png))コントロールをクリックします。
```

## 例：フラグメントの閲覧性の使用

次の例を考えてみましょう。 あなたの保険会社は、顧客が保険契約を管理するための新しいモバイルアプリを宣伝したいと考えています。 ユーザーがスマートフォンからページにアクセスする際に、このアプリを宣伝したいのです。 この場合、新しいスマートフォンアプリのプロモーションバナーを作成し、このバナーをスマートフォンのビューポートでのみ表示できるようにすることができます。

1. デフォルトのデスクトップビューポートから、スマートフォンアプリのプロモーションテキストを含む新規フラグメントを追加します。
1. プロモーションテキストでフラグメントを非表示にします。 これでフラグメントがすべてのビューポートで非表示になります。
1. ［**スマホ（横**）］ ビューポートをクリックします。 このビューポートでの変更は、スマホ（縦）ビューポートにも影響します。
1. [フラグメントの閲覧性を変更](#changing-fragment-visibility) して、スマートフォンのビューポートでプロモーションテキストを再表示します。
1. 異なるビューポートをクリックすると、その効果を確認することができます。 プロモーションテキストは、スマホ（横）およびスマホ（縦）のビューポートでのみ利用可能になりました。

次のビデオは、この例を示しています。

![コンテントページエディタで、特定のビューポートに対するフラグメントの閲覧性を変更します。](./configuring-fragment-visibility/images/06.gif)

```{tip}
ビューポートの閲覧性をデフォルトに戻すには、ビューポートをクリックし、［フラグメントのスタイル］エリアの下にある［Restore Default］ (![Restore Default](../../../../images/icon-restore.png))をクリックします。

![［Restore Default］ボタンを使って、デフォルトのビューポートの閲覧性を復元します。](./configuring-fragment-visibility/images/07.png)
```

## 関連情報

- [フラグメントの管理](./managing-fragments.md)
- [フラグメント構成の保存](../using-fragments/saving-fragment-compositions.md)
- [デフォルトのフラグメントリファレンス](../using-fragments/default-fragments-reference.md)
