# フラグメントの変更のプロパゲート

デフォルトでは、カスタムフラグメントのコードに加えられた[変更](../../../developer-guide/developing-page-fragments/using-the-fragments-editor.md)は、フラグメントのデプロイされたインスタンスにプロパゲートされません。 *フラグメントプロパゲーション*を使用すると、次の2つの方法のいずれかでフラグメントインスタンスに変更をプロパゲートできます。

* [フラグメントの個々のインスタンスに対して手動で行う](#manually-propagating-changes)
* [フラグメントのすべてのインスタンスに対して自動的に行う](#automatically-propagating-changes)

```{important}
データの上書きを回避するために、*編集可能な*フィールドに加えられた変更をフラグメントに直接プロパゲートすることはできません。 ただし、フラグメントのフィールドIDを変更することで、強制的にプロパゲーションさせることができます。 プロパゲートされると、フィールドのコンテンツは表示されなくなりますが、古いフィールドIDを使用してデータベースからコンテンツを取得できます。 詳しくは、開発者向けドキュメントの [フラグメント固有のタグと属性のリファレンス](../../../developer-guide/reference/fragments/fragment-specific-tags-reference.md) をご覧ください。
```

## 変更を手動でプロパゲートする

次の手順に従って、フラグメントの個々のインスタンスに変更を手動でプロパゲートします。

1. *サイトメニュー*（![Site Menu](../../../../images/icon-product-menu.png)）を開き、*［デザイン］*&rarr;*［フラグメント］*に移動します。

1. 目的のフラグメントの*フラグメントセット*に移動します。

1. 目的のフラグメントのアクションボタン（![Actions Button](../../../../images/icon-actions.png)）をクリックし、*［利用数を表示］*を選択します。

   ![フラグメントのアクションメニューから［利用数を表示］オプションを選択します。](./propagating-fragment-changes/images/01.png)

   ```{tip}
   *利用数を表示*オプションが利用できない場合は、そのフラグメントは使用されていません。
   ```

1. ［Usages and Propagation］ページで、最新バージョンに更新するフラグメントインスタンスを確認します。

   この表では、ページまたはテンプレートが*以前のバージョン*を使用しているか、*最新バージョン*を使用しているかを確認できます。

   ![最新のフラグメントの変更を反映させたい要素を選択します。](./propagating-fragment-changes/images/02.png)

1. *［プロパゲート］*ボタン（![Propagate](../../../../images/icon-propagate.png)）をクリックして、フラグメントの選択したインスタンスを更新します。

編集不可能なフィールドに加えられた変更は、選択したフラグメントインスタンスに自動的にプロパゲートされます。

## 変更を自動でプロパゲートする

次の手順に従って、フラグメントのすべてのインスタンスに変更を自動でプロパゲートします。

```{warning}
自動プロパゲーションは、本番環境において、誤字や不正確なコンテンツが公開されるなど、意図しない結果を招く可能性があります。 自動プロパゲーションは、テストまたは開発目的でのみ使用してください。
```

1. *グローバルメニュー*（![Global Menu](../../../../images/icon-applications-menu.png)）を開き、*［コントロールパネル］*タブをクリックして、*［設定］* &rarr; *［システム設定］*に移動します。

1. *［コンテンツとデータ］*セクションで、*［ページ フラグメント］*をクリックします。

1. *［フラグメントの変更を自動的にプロパゲート］*ボックスをオンにします。

   ![［フラグメントの変更を自動的にプロパゲート］ボックスをオンにします。](./propagating-fragment-changes/images/03.png)

1. *［保存］*をクリックします。

有効にすると、フラグメントの編集不可能なフィールドに加えられた変更は、フラグメントのすべてのインスタンスに自動的にプロパゲートされます。

## 追加情報

* [フラグメントの使用](../using-fragments.md)
* [Fragment Styles Reference](./configuring-fragments/styles-reference.md)
* [コンテントページの使用](../../using-content-pages.md)
